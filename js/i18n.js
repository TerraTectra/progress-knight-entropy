const LANG = { EN: "en", RU: "ru" }

const translations = {
    ui: {
        title: { en: "Progress Knight: Entropy", ru: "Progress Knight: Энтропия" },
        settings_title: { en: "Settings", ru: "Настройки" },
        settings_language_label: { en: "Language", ru: "Язык" },
        settings_language_ru: { en: "Russian", ru: "Русский" },
        settings_language_en: { en: "English", ru: "Английский" },
        settings_import_title: { en: "Import / export save", ru: "Импорт/экспорт сохранения" },
        settings_import_button: { en: "Import", ru: "Импорт" },
        settings_export_button: { en: "Export", ru: "Экспорт" },
        settings_import_placeholder: { en: "Paste save here", ru: "Вставьте сохранение сюда" },
        settings_theme_title: { en: "Toggle light/dark theme", ru: "Переключить светлую/тёмную тему" },
        settings_theme_button: { en: "Toggle", ru: "Переключить" },
        settings_discord_title: { en: "Join the Discord community!", ru: "Присоединяйтесь к Discord-сообществу!" },
        settings_reset_title: { en: "Full game reset", ru: "Полный сброс игры" },
        settings_reset_button: { en: "Reset", ru: "Сбросить" },
        settings_msg_no_data: { en: "No data to import", ru: "Нет данных для импорта" },
        settings_msg_invalid_save: { en: "Invalid save data. Please check and try again.", ru: "Некорректные данные сохранения. Проверьте и попробуйте снова." },
        settings_msg_import_success: { en: "Save loaded successfully", ru: "Сохранение успешно загружено" },
        settings_msg_export_success: { en: "Save exported. Copy the text above.", ru: "Сохранение экспортировано. Скопируйте текст выше." },
        settings_reset_modal_title: { en: "Reset progress?", ru: "Сбросить прогресс?" },
        settings_reset_modal_body: { en: "This will delete <b>all</b> progress (jobs, skills, entropy, settings). This action cannot be undone.", ru: "Это удалит <b>весь</b> прогресс (работы, навыки, энтропию, настройки). Действие необратимо." },
        settings_reset_modal_cancel: { en: "Cancel", ru: "Отмена" },
        settings_reset_modal_confirm: { en: "Reset anyway", ru: "Сбросить всё равно" },
        intro_title: { en: "Something feels wrong", ru: "Что-то не так" },
        intro_body: { en: "You wake in your bed, head splitting. It feels like you have lived this moment a thousand times... yet a persistent sense lingers: maybe this life will differ.", ru: "Ты просыпаешься в своей кровати, голова раскалывается. Будто уже тысячу раз проживал этот момент... но навязчиво кажется: может, в этой жизни всё будет иначе." },
        intro_hint: { en: "Hint: live to age 55 to witness changes.", ru: "Совет: проживи до 55 лет, чтобы увидеть изменения." },
        intro_continue: { en: "Continue", ru: "Продолжить" },
        death_title: { en: "Death has reached you", ru: "Возраст настиг вас" },
        death_subtitle: { en: "Age equals lifespan; use the amulet to rebirth before you die.", ru: "Возраст сравнялся с продолжительностью жизни, используйте амулет для перерождения прежде чем умереть." },
        debug_panel_title: { en: "Debug HUD", ru: "Отладочный HUD" },
        debug_panel_close: { en: "Close", ru: "Закрыть" },
        entropy_title: { en: "Entropy", ru: "Энтропия" },
        entropy_section_ledger: { en: "Entropy Ledger", ru: "Реестр энтропии" },
        entropy_section_work: { en: "Entropy Work", ru: "Работа с энтропией" },
        entropy_section_studies: { en: "Entropy Studies", ru: "Изучение энтропии" },
        entropy_section_velocity: { en: "Velocity Upgrades", ru: "Улучшения скорости" },
        entropy_section_stability: { en: "Stability Upgrades", ru: "Улучшения стабильности" },
        entropy_section_meta: { en: "Meta Upgrades", ru: "Мета-улучшения" },
        entropy_section_artifacts: { en: "Entropy Artifacts", ru: "Артефакты энтропии" },
        entropy_section_patterns: { en: "Form / Patterns", ru: "Формы / паттерны" },
        entropy_ledger_note: { en: "Passive actions gain XP only. No passive income.", ru: "Пассивные действия дают только опыт. Без пассивного дохода." },
        entropy_seeds_label: { en: "Seeds:", ru: "Семена:" },
        entropy_insight_label: { en: "Insight (this life):", ru: "Прозрение (эта жизнь):" },
        entropy_max_insight_label: { en: "Max insight ever:", ru: "Макс. прозрение за всё время:" },
        entropy_ep_label: { en: "Entropy points (EP):", ru: "Очки энтропии (ОЭ):" },
        entropy_focus_label: { en: "Focus:", ru: "Фокус:" },
        entropy_focus_disabled: { en: "Disabled", ru: "Отключено" },
        entropy_focus_none: { en: "None selected", ru: "Не выбрано" },
        entropy_focus_suffix_full_power: { en: "(full power)", ru: "(полная мощность)" },
        entropy_overseer_button_unlock: { en: "Unlock Cycle Overseer ({cost} EP)", ru: "Разблокировать Циклового Наблюдателя ({cost} ОЭ)" },
        entropy_overseer_button_unlocked: { en: "Cycle Overseer unlocked", ru: "Цикловой Наблюдатель разблокирован" },
        entropy_overseer_note: { en: "Passive actions gain XP only and never generate money. Overseer lets one task run at full power while all others train softly.", ru: "Пассивные действия дают только опыт и не приносят деньги. Наблюдатель позволяет одной задаче работать на полную, а остальные тренируются мягко." },
        entropy_col_upgrade: { en: "Upgrade", ru: "Улучшение" },
        entropy_col_level: { en: "Level", ru: "Уровень" },
        entropy_col_cost: { en: "Cost", ru: "Стоимость" },
        entropy_col_status: { en: "Status", ru: "Статус" },
        entropy_col_artifact: { en: "Artifact", ru: "Артефакт" },
        entropy_col_pattern: { en: "Pattern", ru: "Паттерн" },
        entropy_upgrade_velocity_temporalMomentum_name: { en: "Temporal Momentum", ru: "Импульс времени" },
        entropy_upgrade_velocity_temporalMomentum_desc: { en: "Extend early window.", ru: "Продлить раннее окно." },
        entropy_upgrade_velocity_earlyCompression_name: { en: "Early Compression", ru: "Ранняя компрессия" },
        entropy_upgrade_velocity_earlyCompression_desc: { en: "Front-load early XP.", ru: "Сместить опыт в начало." },
        entropy_upgrade_velocity_chainProgression_name: { en: "Chain Progression", ru: "Цепная прогрессия" },
        entropy_upgrade_velocity_chainProgression_desc: { en: "Switch faster.", ru: "Быстрее переключаться." },
        entropy_upgrade_velocity_momentumPersistence_name: { en: "Momentum Persistence", ru: "Удержание импульса" },
        entropy_upgrade_velocity_momentumPersistence_desc: { en: "Sustain early income.", ru: "Сохранять ранний доход." },
        entropy_upgrade_velocity_wealthFocus_name: { en: "Wealth Focus", ru: "Фокус на доход" },
        entropy_upgrade_velocity_wealthFocus_desc: { en: "Prioritize income over mastery (exclusive).", ru: "Доход важнее мастерства (взаимоисключающе)." },
        entropy_upgrade_velocity_masteryFocus_name: { en: "Mastery Focus", ru: "Фокус на мастерство" },
        entropy_upgrade_velocity_masteryFocus_desc: { en: "Favor learning over income (exclusive).", ru: "Обучение важнее дохода (взаимоисключающе)." },
        entropy_upgrade_stability_entropyStability_name: { en: "Entropy Stability", ru: "Стабильность энтропии" },
        entropy_upgrade_stability_entropyStability_desc: { en: "Gentle steadiness.", ru: "Мягкая устойчивость." },
        entropy_upgrade_stability_lifeContinuity_name: { en: "Life Continuity", ru: "Непрерывность жизни" },
        entropy_upgrade_stability_lifeContinuity_desc: { en: "Reward long lives.", ru: "Вознаграждать долгие жизни." },
        entropy_upgrade_stability_balancedGrowth_name: { en: "Balanced Growth", ru: "Сбалансированный рост" },
        entropy_upgrade_stability_balancedGrowth_desc: { en: "Across-the-board gain.", ru: "Прирост по всем направлениям." },
        entropy_upgrade_stability_shortBrilliantLife_name: { en: "Short Brilliant Life", ru: "Короткая яркая жизнь" },
        entropy_upgrade_stability_shortBrilliantLife_desc: { en: "Bright early flourish; gentler late game (exclusive).", ru: "Яркий старт, мягкий поздний этап (взаимоисключающе)." },
        entropy_upgrade_stability_longSteadyLife_name: { en: "Long Steady Life", ru: "Длинная ровная жизнь" },
        entropy_upgrade_stability_longSteadyLife_desc: { en: "Slow rise, strong finish (exclusive).", ru: "Медленный рост, уверенный финал (взаимоисключающе)." },
        entropy_upgrade_stability_earlyPeak_name: { en: "Early Peak", ru: "Ранний пик" },
        entropy_upgrade_stability_earlyPeak_desc: { en: "Fast start, early plateau (exclusive).", ru: "Быстрый старт, раннее плато (взаимоисключающе)." },
        entropy_upgrade_stability_lateBloom_name: { en: "Late Bloom", ru: "Поздний расцвет" },
        entropy_upgrade_stability_lateBloom_desc: { en: "Slow open, richer later (exclusive).", ru: "Медленное раскрытие, богаче позднее (взаимоисключающе)." },
        entropy_upgrade_stability_smoothing_name: { en: "Entropy Smoothing", ru: "Сглаживание энтропии" },
        entropy_upgrade_stability_smoothing_desc: { en: "Diminishing polish to income swings.", ru: "Убывающее сглаживание колебаний дохода." },
        entropy_upgrade_stability_quietMind_name: { en: "Quiet Mind", ru: "Тихий разум" },
        entropy_upgrade_stability_quietMind_desc: { en: "Diminishing comfort gains.", ru: "Убывающий комфорт." },
        entropy_upgrade_stability_patternAttunement_name: { en: "Pattern Attunement", ru: "Настройка паттернов" },
        entropy_upgrade_stability_patternAttunement_desc: { en: "Tiny uplift to patterns, capped.", ru: "Крошечный прирост паттернов, сильно ограничен." },
        entropy_upgrade_meta_unifiedArchitecture_name: { en: "Unified Architecture", ru: "Единая архитектура" },
        entropy_upgrade_meta_unifiedArchitecture_desc: { en: "Finalize entropy; freeze further growth once stabilized.", ru: "Завершить энтропию; заморозить рост после стабилизации." },
        entropy_artifact_sigilMomentum_name: { en: "Sigil of Momentum", ru: "Печать импульса" },
        entropy_artifact_sigilMomentum_desc: { en: "Enhances early-life XP and job income.", ru: "Усиливает ранний опыт и доход от работ." },
        entropy_artifact_chainConductor_name: { en: "Chain Conductor", ru: "Проводник цепей" },
        entropy_artifact_chainConductor_desc: { en: "More eager auto-switch into new tasks.", ru: "Более охотно авто-переключает на новые задачи." },
        entropy_artifact_loopAnchor_name: { en: "Loop Anchor", ru: "Якорь петли" },
        entropy_artifact_loopAnchor_desc: { en: "Strengthens early income momentum persistence.", ru: "Укрепляет сохранение раннего дохода." },
        entropy_artifact_patternResonator_name: { en: "Pattern Resonator", ru: "Резонатор паттернов" },
        entropy_artifact_patternResonator_desc: { en: "Amplifies pattern-based bonuses. Requires UA.", ru: "Усиливает бонусы паттернов. Требует ЕА." },
        entropy_pattern_laborCycle_name: { en: "Labor Cycle", ru: "Цикл труда" },
        entropy_pattern_laborCycle_desc: { en: "Favors time spent working.", ru: "Поощряет время, проведённое в работе." },
        entropy_pattern_scholarLoop_name: { en: "Scholar Loop", ru: "Круг учёного" },
        entropy_pattern_scholarLoop_desc: { en: "Favors time spent training skills.", ru: "Поощряет время, потраченное на навыки." },
        entropy_pattern_compressedLife_name: { en: "Compressed Life", ru: "Сжатая жизнь" },
        entropy_pattern_compressedLife_desc: { en: "Short, intense lives.", ru: "Короткие, интенсивные жизни." },
        entropy_pattern_stableCycle_name: { en: "Stable Cycle", ru: "Стабильный цикл" },
        entropy_pattern_stableCycle_desc: { en: "Long, balanced lives.", ru: "Долгие, сбалансированные жизни." },
        entropy_pattern_opportunist_name: { en: "Opportunist", ru: "Оппортунист" },
        entropy_pattern_opportunist_desc: { en: "Adaptive, auto-switch-driven lives.", ru: "Адаптивные жизни с авто-переключением." },
        story_almanach_found: { en: "At age 55, you uncover a heavy Almanach of Entropy. Its pages whisper of patterns, but its power remains dormant—for now.", ru: "В 55 лет ты находишь тяжёлый Альманах Энтропии. Его страницы шепчут о паттернах, но сила пока спит." },
        story_almanach_bound: { en: "You jolt awake at 14 once more. The Almanach is bound to you now—its entropy lessons will follow every life from here on.", ru: "Ты вновь просыпаешься в 14. Альманах теперь привязан к тебе — уроки энтропии будут следовать за каждой жизнью." },
        story_cycle_collapse: { en: "The cycle collapses under strain. You are forced to rebirth.", ru: "Цикл рушится от напряжения. Ты вынужден переродиться." },
        story_stabilized: { en: "You no longer grow. You have stabilized the structure of your reality.", ru: "Рост остановился. Ты стабилизировал структуру своей реальности." },
        story_meaning_spark: { en: "A spark of meaning emerges amidst the numbers.", ru: "В пелене чисел вспыхивает искра смысла." },
        story_meaning_anchored: { en: "Your actions feel anchored—numbers start to matter again.", ru: "Действия обретают опору — числа снова имеют значение." },
        story_universe_2: { en: "Universe II: Sharper gains and costs. Happiness is more fragile.", ru: "Вселенная II: резче рост и цены. Счастье хрупче." },
        story_universe_3: { en: "Universe III: Patterns run deeper. Repetition is rewarded; rapid switching bleeds momentum.", ru: "Вселенная III: паттерны глубже. Повторения вознаграждаются; резкие смены съедают импульс." },
        story_universe_4: { en: "Universe IV: Fragile Human. Youth surges, age and overwork erode. Pace yourself.", ru: "Вселенная IV: Хрупкий человек. Молодость бурлит, возраст и выгорание разрушают. Береги силы." },
        story_universe_5: { en: "Universe V: Compressed Life. Idle years rush by with little gain; focused moments are dense—but aging and burnout still bite.", ru: "Вселенная V: Сжатая жизнь. Праздные годы пролетают почти без пользы; фокус плотен, но старение и выгорание кусаются." },
        story_universe_6: { en: "Universe VI: World of Choice. Each life grants limited major decisions; paths can exclude one another.", ru: "Вселенная VI: Мир выбора. В жизни мало больших решений; пути могут исключать друг друга." },
        story_universe_7: { en: "Universe VII: Death of Meaning. Numbers alone do not satisfy—meaningful acts steady happiness and unlock deeper insight.", ru: "Вселенная VII: Смерть смысла. Одних чисел мало — осмысленные действия стабилизируют счастье и открывают прозрение." },
        story_universe_8: { en: "Universe VIII: Distorted Cycle. The loop is unstable—pressure can trigger forced rebirth and distort time.", ru: "Вселенная VIII: Искажённый цикл. Петля нестабильна — давление может вызвать вынужденное перерождение и искажение времени." },
        story_amulet_intro_25: { en: "On your 25th birthday, you stumble upon a strange amulet. It looks like cheap copper scrap—hardly worth selling. Yet you feel compelled to keep it, tucking it away for later.", ru: "В свой 25-й день рождения ты натыкаешься на странный амулет. На вид дешёвый медный ломтик, продавать такое бессмысленно. Но чувство подсказывает оставить его, и ты убираешь амулет про запас." },
        story_amulet_note_45: { en: "At 45, the amulet in your pocket suddenly trembles. When you pull it out, the shaking stops, revealing a strange engraving in its center.", ru: "В 45 лет амулет в кармане резко начинает дрожать. Ты достаёшь его — дрожь стихает, и в центре проступает странная гравировка." },
        story_amulet_note_65: { en: "At 65, the amulet quivers again and an eye opens at its center. Fear rises, but life is short—what happens if you touch the eye?", ru: "В 65 лет амулет снова дрожит, и в центре открывается глаз. Страшно, но жизнь коротка — что будет, если коснуться глаза?" },
        story_amulet_hint_65: { en: "Touching the eye will rebirth you, wiping levels and coins but granting <b>experience multipliers</b> equal to <b>1 + max job/skill level / 10.</b> Progress will accelerate in your next life.", ru: "Коснувшись глаза, ты переродишься: уровни и монеты исчезнут, но получишь <b>множители опыта</b> <b>1 + макс. уровень работы/навыка / 10.</b> В новой жизни всё изучается быстрее." },
        story_amulet_note_200: { en: "At 200, a sinister hum rises from the amulet. A mouth appears and whispers: \"You've come far... are you ready to accept evil?\"", ru: "В 200 лет из амулета исходит зловещий гул. Появляется рот и шепчет: «Ты зашёл далеко... готов принять зло?»" },
        story_amulet_hint_200: { en: "Accepting evil wipes all levels, coins, and maximums, but unlocks a new skill branch and grants <b><span id=\"evilGainDisplay\"></span> Evil</b> to reshape future lives.", ru: "Приняв зло, ты сбросишь все уровни, монеты и даже максимумы, но откроешь новую ветку навыков и получишь <b><span id=\"evilGainDisplay\"></span> зла</b> для будущих жизней." },
        story_amulet_btn_touch_eye: { en: "Touch the eye", ru: "Коснуться глаза" },
        story_amulet_btn_accept_evil: { en: "Accept evil", ru: "Принять зло" },
        action_buy: { en: "Buy", ru: "Купить" },
        status_locked: { en: "Locked", ru: "Закрыто" },
        status_frozen: { en: "Frozen", ru: "Заморожено" },
        status_req: { en: "Req.", ru: "Треб." },
        status_taken: { en: "Taken", ru: "Занято" },
        status_max: { en: "Max", ru: "Макс" },
        status_capped: { en: "Capped", ru: "Лимит" },
        status_owned: { en: "Owned", ru: "Приобретено" },
        status_not_owned: { en: "Not owned", ru: "Не приобретено" },
        status_blocked_limit: { en: "Blocked (artifact limit reached)", ru: "Блок: лимит артефактов" },
        status_locked_requirements: { en: "Locked (requirements unmet)", ru: "Закрыто (требования не выполнены)" },
        tab_jobs: { en: "Jobs", ru: "Работы" },
        tab_skills: { en: "Skills", ru: "Навыки" },
        tab_shop: { en: "Shop", ru: "Магазин" },
        tab_amulet: { en: "Amulet", ru: "Амулет" },
        tab_rebirth: { en: "Rebirth", ru: "Перерождение" },
        tab_entropy: { en: "Entropy", ru: "Энтропия" },
        tab_settings: { en: "Settings", ru: "Настройки" },
        tabJobs: { en: "Jobs", ru: "Работы" },
        tabSkills: { en: "Skills", ru: "Навыки" },
        tabShop: { en: "Shop", ru: "Магазин" },
        tabEntropy: { en: "Entropy", ru: "Энтропия" },
        tabRebirth: { en: "Amulet", ru: "Амулет" },
        tabSettings: { en: "Settings", ru: "Настройки" },
        sidebarUniverseOriginal: { en: "Universe I - The original world.", ru: "Вселенная I — исходный мир." },
        sidebarAge: { en: "Age", ru: "Возраст" },
        sidebarDay: { en: "Day", ru: "День" },
        sidebarLifespan: { en: "Lifespan:", ru: "Продолжительность жизни:" },
        sidebarPause: { en: "Pause", ru: "Пауза" },
        sidebarPlay: { en: "Resume", ru: "Продолжить" },
        sidebarDebug: { en: "Debug", ru: "Отладка" },
        sidebarTravelNextUniverse: { en: "Travel to next universe", ru: "Перейти в следующую вселенную" },
        sidebarBalance: { en: "Balance (in coins)", ru: "Баланс (в монетах)" },
        sidebarNetPerDay: { en: "Net/day:", ru: "Чистый доход/день:" },
        sidebarIncomePerDay: { en: "Income/day:", ru: "Доход/день:" },
        sidebarExpensePerDay: { en: "Expense/day:", ru: "Расход/день:" },
        sidebarCurrentJob: { en: "Current job", ru: "Текущая работа" },
        sidebarCurrentSkill: { en: "Current skill", ru: "Текущий навык" },
        sidebarHappinessLabel: { en: "Happiness:", ru: "Счастье:" },
        sidebarHappinessHint: { en: "Affects all xp gain", ru: "Влияет на весь прирост опыта" },
        sidebarEvilLabel: { en: "Evil:", ru: "Зло:" },
        sidebarEvilHint: { en: "Affects dark magic xp gain", ru: "Влияет на опыт тёмной магии" },
        sidebarTimeWarpingLabel: { en: "Time warping:", ru: "Искажение времени:" },
        sidebarTimeWarpingHint: { en: "Affects game speed", ru: "Влияет на скорость игры" },
        sidebarTimeWarpingButtonEnable: { en: "Enable warp", ru: "Включить варп" },
        sidebarTimeWarpingButtonDisable: { en: "Disable warp", ru: "Выключить варп" },
        columnLevel: { en: "Level", ru: "Уровень" },
        columnEffect: { en: "Effect", ru: "Эффект" },
        columnXpPerDay: { en: "Xp/day", ru: "Опыт/день" },
        columnXpLeft: { en: "Xp left", ru: "Осталось опыта" },
        columnMaxLevel: { en: "Max level", ru: "Макс. уровень" },
        columnSkip: { en: "Skip", ru: "Пропустить" },
        headerIncomePerDay: { en: "Income/day", ru: "Доход/день" },
        headerEffect: { en: "Effect", ru: "Эффект" },
        headerItem: { en: "Item", ru: "Предмет" },
        headerActive: { en: "Active", ru: "Активно" },
        headerExpensePerDay: { en: "Expense/day", ru: "Расход/день" },
        automationAutoPromote: { en: "Auto-promote", ru: "Авто-повышение" },
        automationAutoLearn: { en: "Auto-learn", ru: "Авто-обучение" },
        requiredPrefix: { en: "Required:", ru: "Требуется:" },
        universeRequirement: { en: "Universe", ru: "Вселенная" },
        meaningLabel: { en: "Meaning", ru: "Смысл" },
        tagPassive: { en: "PASSIVE", ru: "ПАССИВНО" },
        tagActive: { en: "ACTIVE", ru: "АКТИВНО" },
        skillUnavailable: { en: "Not available in this version.", ru: "Недоступно в этой версии." },
        settingsLanguageLabel: { en: "Language", ru: "Язык" },
        settingsLanguageRu: { en: "Russian", ru: "Русский" },
        settingsLanguageEn: { en: "English", ru: "Английский" },
        observerTitle: { en: "Observer of Worlds", ru: "Наблюдатель миров" },
        observerStudents: { en: "Students", ru: "Ученики" },
        observerDetails: { en: "Details", ru: "Детали" },
    },
    category: {
        "Common work": { en: "Common work", ru: "Простая работа" },
        "Military": { en: "Military", ru: "Армия" },
        "The Arcane Association": { en: "The Arcane Association", ru: "Арканная ассоциация" },
        "Fundamentals": { en: "Fundamentals", ru: "Базовые" },
        "Combat": { en: "Combat", ru: "Бой" },
        "Magic": { en: "Magic", ru: "Магия" },
        "Dark magic": { en: "Dark magic", ru: "Тёмная магия" },
        "Entropy Work": { en: "Entropy Work", ru: "Работа с энтропией" },
        "Entropy Studies": { en: "Entropy Studies", ru: "Изучение энтропии" },
        "Deep Studies": { en: "Deep Studies", ru: "Глубокие исследования" },
        "Longevity": { en: "Longevity", ru: "Долголетие" },
        "Orchestration": { en: "Orchestration", ru: "Оркестровка жизни" },
        "Commitments": { en: "Commitments", ru: "Установки" },
        "Cycle": { en: "Cycle", ru: "Цикл" },
        "Properties": { en: "Properties", ru: "Жильё" },
        "Misc": { en: "Misc", ru: "Прочее" },
    },
    universe: {
        1: { name: { en: "Universe I", ru: "Вселенная I" }, description: { en: "The original world.", ru: "Исходный мир." } },
        2: { name: { en: "Universe II", ru: "Вселенная II" }, description: { en: "Sharper: gains and costs rise; happiness is brittle.", ru: "Острая: рост и цены выше, счастье хрупко." } },
        3: { name: { en: "Universe III", ru: "Вселенная III" }, description: { en: "Deep patterns: consistency is power; chaos bleeds momentum.", ru: "Глубокие паттерны: сила в стабильности, хаос забирает скорость." } },
        4: { name: { en: "Universe IV", ru: "Вселенная IV" }, description: { en: "Fragile Human: youth is bright, age erodes and overwork drains.", ru: "Хрупкий человек: яркая молодость, тяжёлый возраст и выгорание." } },
        5: { name: { en: "Universe V", ru: "Вселенная V" }, description: { en: "Compressed Life: idle years rush by; focused moments carry more weight.", ru: "Сжатая жизнь: праздные годы пролетают, фокус ценится выше." } },
        6: { name: { en: "Universe VI", ru: "Вселенная VI" }, description: { en: "World of Choice: limited major paths and exclusivity.", ru: "Мир выбора: ограниченные ключевые пути и взаимоисключающие решения." } },
        7: { name: { en: "Universe VII", ru: "Вселенная VII" }, description: { en: "Death of Meaning: numbers alone are hollow; seek purpose.", ru: "Смерть смысла: одних чисел мало — нужен смысл." } },
        8: { name: { en: "Universe VIII", ru: "Вселенная VIII" }, description: { en: "Distorted Cycle: instability may force rebirth under pressure.", ru: "Искажённый цикл: нестабильность может вынудить перерождение." } },
        9: { name: { en: "Universe IX", ru: "Вселенная IX" }, description: { en: "Meta Reality: systems are visible; their weights can be nudged.", ru: "Мета-реальность: системы видимы, их вес можно слегка менять." } },
    },
    observerIntellect: {
        "Fool": { en: "Fool", ru: "Глупец" },
        "Clumsy": { en: "Clumsy", ru: "Неуклюжий" },
        "Average": { en: "Average", ru: "Обычный" },
        "Reasonable": { en: "Reasonable", ru: "Разумный" },
        "Smart": { en: "Smart", ru: "Смышленый" },
        "Very Smart": { en: "Very Smart", ru: "Очень умный" },
        "Talented": { en: "Talented", ru: "Талантливый" },
        "Genius": { en: "Genius", ru: "Гений" },
        "Supermind": { en: "Supermind", ru: "Сверхразум" },
        "Singularity": { en: "Singularity", ru: "Сингулярность" },
    },
    name: {
        // Jobs
        "Beggar": { en: "Beggar", ru: "Нищий" },
        "Farmer": { en: "Farmer", ru: "Фермер" },
        "Fisherman": { en: "Fisherman", ru: "Рыбак" },
        "Miner": { en: "Miner", ru: "Шахтёр" },
        "Blacksmith": { en: "Blacksmith", ru: "Кузнец" },
        "Merchant": { en: "Merchant", ru: "Купец" },
        "Squire": { en: "Squire", ru: "Оруженосец" },
        "Footman": { en: "Footman", ru: "Пехотинец" },
        "Veteran footman": { en: "Veteran footman", ru: "Опытный пехотинец" },
        "Knight": { en: "Knight", ru: "Рыцарь" },
        "Veteran knight": { en: "Veteran knight", ru: "Опытный рыцарь" },
        "Elite knight": { en: "Elite knight", ru: "Элитный рыцарь" },
        "Holy knight": { en: "Holy knight", ru: "Святой рыцарь" },
        "Legendary knight": { en: "Legendary knight", ru: "Легендарный рыцарь" },
        "Student": { en: "Student", ru: "Студент" },
        "Apprentice mage": { en: "Apprentice mage", ru: "Ученик мага" },
        "Mage": { en: "Mage", ru: "Маг" },
        "Wizard": { en: "Wizard", ru: "Волшебник" },
        "Master wizard": { en: "Master wizard", ru: "Мастер волшебник" },
        "Chairman": { en: "Chairman", ru: "Председатель" },
        "Archmage Consultant": { en: "Archmage Consultant", ru: "Архимаг-консультант" },
        "Elder Advisor": { en: "Elder Advisor", ru: "Советник-старейшина" },
        // Entropy jobs
        "Work with Entropy": { en: "Work with Entropy", ru: "Работа с энтропией" },
        "Chronicle Keeper": { en: "Chronicle Keeper", ru: "Хранитель хроник" },
        "Fate Analyst": { en: "Fate Analyst", ru: "Аналитик судьбы" },
        "Flow Regulator": { en: "Flow Regulator", ru: "Регулятор потока" },
        "Reality Architect": { en: "Reality Architect", ru: "Архитектор реальности" },
        // Skills
        "Study Entropy": { en: "Study Entropy", ru: "Изучение энтропии" },
        "Concentration": { en: "Concentration", ru: "Концентрация" },
        "Productivity": { en: "Productivity", ru: "Продуктивность" },
        "Bargaining": { en: "Bargaining", ru: "Торг" },
        "Meditation": { en: "Meditation", ru: "Медитация" },
        "Strength": { en: "Strength", ru: "Сила" },
        "Battle tactics": { en: "Battle tactics", ru: "Тактика боя" },
        "Muscle memory": { en: "Muscle memory", ru: "Мышечная память" },
        "Mana control": { en: "Mana control", ru: "Контроль маны" },
        "Immortality": { en: "Immortality", ru: "Бессмертие" },
        "Time warping": { en: "Time warping", ru: "Искажение времени" },
        "Super immortality": { en: "Super immortality", ru: "Супербессмертие" },
        "Dark influence": { en: "Dark influence", ru: "Тёмное влияние" },
        "Evil control": { en: "Evil control", ru: "Контроль зла" },
        "Intimidation": { en: "Intimidation", ru: "Запугивание" },
        "Demon training": { en: "Demon training", ru: "Тренировка демонов" },
        "Blood meditation": { en: "Blood meditation", ru: "Кровавая медитация" },
        "Demon's wealth": { en: "Demon's wealth", ru: "Богатство демона" },
        "Read Almanach": { en: "Read Almanach", ru: "Чтение альманаха" },
        "Pattern Comprehension": { en: "Pattern Comprehension", ru: "Понимание паттернов" },
        "Time Manipulation": { en: "Time Manipulation", ru: "Манипуляция временем" },
        "Reality Architecture": { en: "Reality Architecture", ru: "Архитектура реальности" },
        "Self-Awareness of the Cycle": { en: "Self-Awareness of the Cycle", ru: "Осознание цикла" },
        "Pattern Weaving": { en: "Pattern Weaving", ru: "Ткачество паттернов" },
        "Body Maintenance": { en: "Body Maintenance", ru: "Поддержание тела" },
        "Life Orchestration": { en: "Life Orchestration", ru: "Оркестровка жизни" },
        "Life Decision": { en: "Life Decision", ru: "Жизненный выбор" },
        "Career Obsession": { en: "Career Obsession", ru: "Одержимость карьерой" },
        "Inner Mastery": { en: "Inner Mastery", ru: "Внутреннее мастерство" },
        "Wanderer": { en: "Wanderer", ru: "Скиталец" },
        "Rooted Citizen": { en: "Rooted Citizen", ru: "Оседлый гражданин" },
        "Existential Insight": { en: "Existential Insight", ru: "Экзистенциальное прозрение" },
        "Cycle Steward": { en: "Cycle Steward", ru: "Смотритель цикла" },
        "Meta Tuning": { en: "Meta Tuning", ru: "Мета-настройка" },
        "Deep Studies": { en: "Deep Studies", ru: "Глубокие исследования" },
        // Items
        "Homeless": { en: "Homeless", ru: "Бездомный" },
        "Tent": { en: "Tent", ru: "Палатка" },
        "Wooden hut": { en: "Wooden hut", ru: "Деревянная лачуга" },
        "Cottage": { en: "Cottage", ru: "Коттедж" },
        "House": { en: "House", ru: "Дом" },
        "Large house": { en: "Large house", ru: "Большой дом" },
        "Small palace": { en: "Small palace", ru: "Малый дворец" },
        "Grand palace": { en: "Grand palace", ru: "Большой дворец" },
        "Book": { en: "Book", ru: "Книга" },
        "Dumbbells": { en: "Dumbbells", ru: "Гантели" },
        "Personal squire": { en: "Personal squire", ru: "Личный оруженосец" },
        "Steel longsword": { en: "Steel longsword", ru: "Стальной длинный меч" },
        "Butler": { en: "Butler", ru: "Дворецкий" },
        "Sapphire charm": { en: "Sapphire charm", ru: "Сапфировый амулет" },
        "Study desk": { en: "Study desk", ru: "Письменный стол" },
        "Library": { en: "Library", ru: "Библиотека" },
    },
    tooltip: {
        "Beggar": { en: "Struggle day and night for a couple of copper coins. It feels like you are at the brink of death each day.", ru: "День и ночь бороться за пару медяков. Кажется, что каждый день ты на грани смерти." },
        "Farmer": { en: "Plow the fields and grow the crops. It's not much but it's honest work.", ru: "Пахать поля и растить урожай. Небогато, но честно." },
        "Fisherman": { en: "Reel in various fish and sell them for a handful of coins. A relaxing but still a poor paying job.", ru: "Ловить рыбу и продавать её за горсть монет. Спокойно, но платят мало." },
        "Miner": { en: "Delve into dangerous caverns and mine valuable ores. The pay is quite meager compared to the risk involved.", ru: "Спускаться в опасные пещеры и добывать руду. Оплата мала по сравнению с риском." },
        "Blacksmith": { en: "Smelt ores and carefully forge weapons for the military. A respectable and OK paying commoner job.", ru: "Плавить руду и ковать оружие для армии. Уважаемая и неплохо оплачиваемая работа." },
        "Merchant": { en: "Travel from town to town, bartering fine goods. The job pays decently well and is a lot less manually-intensive.", ru: "Путешествовать между городами, торгуя товарами. Платят прилично и меньше физического труда." },
        "Squire": { en: "Carry around your knight's shield and sword along the battlefield. Very meager pay but the work experience is quite valuable.", ru: "Носить щит и меч рыцаря по полю боя. Платят мало, но опыт бесценен." },
        "Footman": { en: "Put down your life to battle with enemy soldiers. A courageous, respectable job but you are still worthless in the grand scheme of things.", ru: "Рисковать жизнью, сражаясь с врагами. Мужественная работа, хотя тебя легко заменить." },
        "Veteran footman": { en: "More experienced and useful than the average footman, take out the enemy forces in battle with your might. The pay is not that bad.", ru: "Опытнее обычного пехотинца, разишь врагов своей силой. Платят уже неплохо." },
        "Knight": { en: "Slash and pierce through enemy soldiers with ease, while covered in steel from head to toe. A decently paying and very respectable job.", ru: "Легко прорубаешься через врагов, облачённый в сталь. Уважаемая и хорошо оплачиваемая работа." },
        "Veteran knight": { en: "Utilising your unmatched combat ability, slaugher enemies effortlessly. Most footmen in the military would never be able to acquire such a well paying job like this.", ru: "Используя несравненное мастерство, крошишь врагов без усилий. Большинство пехотинцев не доберутся до такой оплаты." },
        "Elite knight": { en: "Obliterate squadrons of enemy soldiers in one go with extraordinary proficiency, while equipped with the finest gear. Such a feared unit on the battlefield is paid extremely well.", ru: "Уничтожаешь отряды врагов с выдающимся мастерством и лучшим снаряжением. За страх, который ты наводишь, платят щедро." },
        "Holy knight": { en: "Collapse entire armies in mere seconds with your magically imbued blade. The handful of elite knights who attain this level of power are showered with coins.", ru: "Сокрушаешь целые армии за секунды магическим клинком. Немногим доступна такая сила, им щедро платят." },
        "Legendary knight": { en: "Feared worldwide, obliterate entire nations in a blink of an eye. Roughly every century, only one holy knight is worthy of receiving such an esteemed title.", ru: "Всех пугаешь по миру, уничтожая страны в мгновение. Лишь раз в век святой рыцарь заслуживает этот титул." },
        "Student": { en: "Enroll as a student of the arcane arts, in hopes of having the potential to join their ranks as a true member.", ru: "Учишься арканным искусствам, надеясь стать полноправным членом ассоциации." },
        "Apprentice mage": { en: "Begin your real training of the arcane arts. Learn to control your mana and cast minor spells to assist the association.", ru: "Начинаешь настоящее обучение. Учишься контролировать ману и колдовать малые заклинания." },
        "Mage": { en: "Delve deeper into the arcane arts and begin to use more powerful spells. Your utility is now noticeable.", ru: "Глубже изучаешь арканные искусства и используешь более мощные заклинания. Твоя польза заметна." },
        "Wizard": { en: "Your experience in the arcane arts has become significant. Assist the association with dangerous missions when necessary.", ru: "Твой опыт стал значительным. Помогаешь ассоциации в опасных миссиях." },
        "Master wizard": { en: "Use your immeasurable mastery of the arcane arts to perform high level tasks for the association. Your salary has become quite comfortable.", ru: "Используешь безмерное мастерство для сложных задач ассоциации. Жалованье стало весьма комфортным." },
        "Chairman": { en: "You've been assigned the prestigious role of chairing the arcane association. Lead the organization and control its flow of mana to all who need it.", ru: "Получаешь престижную роль главы ассоциации. Руководишь и распределяешь потоки маны нуждающимся." },
        "Archmage Consultant": { en: "A traveling consultant who sells arcane insight and high-end spellcraft to the highest bidder across universes.", ru: "Путешествующий консультант, продающий арканные знания и высшую магию тому, кто заплатит больше." },
        "Elder Advisor": { en: "A seasoned elder who trades wisdom for coin with minimal strain, using a lifetime of experience.", ru: "Опытный старейшина, обменивающий мудрость на монеты с минимальными нагрузками." },
        "Work with Entropy": { en: "Engage directly with entropy tasks, trading focused effort for early insight and income.", ru: "Напрямую работать с энтропией, обменяя сосредоточие на раннее прозрение и доход." },
        "Study Entropy": { en: "Research entropy principles to deepen your understanding.", ru: "Изучать принципы энтропии, углубляя понимание." },
        "Chronicle Keeper": { en: "Record every fleeting shift in fate. Pays modestly but builds long-term insight when focused.", ru: "Записывать каждое изменение судьбы. Скромный доход, но копит прозрение при фокусе." },
        "Fate Analyst": { en: "Dissect complex destiny patterns and extract their lessons. Generates income only while active.", ru: "Разбирать сложные узоры судьбы и извлекать уроки. Доход идёт только при активности." },
        "Flow Regulator": { en: "Steady the stream of time, trading effort for controlled progress. Income requires active focus.", ru: "Уравновешивать поток времени, обменивая усилия на контролируемый прогресс. Доход только при фокусе." },
        "Reality Architect": { en: "Redesign realities for high-tier roles, boosting their mastery when focused.", ru: "Перепроектировать реальности для высоких ролей, усиливая их мастерство при фокусе." },
        "Concentration": { en: "Practice focusing your mind on singular tasks, reducing distraction and thought drift.", ru: "Тренируешь фокус на одной задаче, уменьшая отвлечения." },
        "Productivity": { en: "Focus your mind on being as productive as possible. Drift away from other thoughts.", ru: "Настраиваешься на максимальную продуктивность, отбрасывая лишние мысли." },
        "Bargaining": { en: "Learn how to be a smooth-talker to lower the prices when purchasing items. You are still an amateur at negotiating lower prices.", ru: "Учишься красноречию, чтобы сбивать цены при покупке. Пока ты новичок в переговорах." },
        "Meditation": { en: "Your mental focus has improved, allowing for better comprehension of the job at hand.", ru: "Ментальная концентрация выросла, лучше понимаешь текущую работу." },
        "Strength": { en: "Train your body to lift heavier objects and deal more damage to enemies.", ru: "Тренируешь тело, чтобы поднимать тяжести и наносить больший урон." },
        "Battle tactics": { en: "Sharpen your mind to develop efficient combat strategies and adapt on the fly.", ru: "Оттачиваешь ум для эффективных стратегий и быстрой адаптации в бою." },
        "Muscle memory": { en: "Repeat movements until your body performs them without thought.", ru: "Повторяешь движения, пока тело не делает их бездумно." },
        "Mana control": { en: "Gain finer control over the mana within you, improving all spellcasting.", ru: "Получаешь тонкий контроль над маной, улучшая все заклинания." },
        "Immortality": { en: "Slow aging to extend your lifespan significantly.", ru: "Замедляешь старение, значительно продлевая жизнь." },
        "Time warping": { en: "Bend time slightly to hasten your actions.", ru: "Немного искажаешь время, ускоряя действия." },
        "Super immortality": { en: "Push immortality further, barely aging at all.", ru: "Продвигаешь бессмертие дальше, почти не старея." },
        "Dark influence": { en: "Spread a dark aura to coerce and manipulate.", ru: "Распространяешь тёмную ауру, чтобы принуждать и манипулировать." },
        "Evil control": { en: "Harness evil energy with tighter discipline.", ru: "Обуздываешь энергию зла более жёсткой дисциплиной." },
        "Intimidation": { en: "Project fear to bend others to your will.", ru: "Излучаешь страх, чтобы подчинять других." },
        "Demon training": { en: "Learn the ways of training demonic entities.", ru: "Изучаешь методы дрессировки демонов." },
        "Blood meditation": { en: "Meditate through blood rites to empower yourself.", ru: "Медитируешь через кровавые обряды, усиливая себя." },
        "Demon's wealth": { en: "Exploit demonic pacts for material gain.", ru: "Используешь демонические сделки ради богатства." },
        "Read Almanach": { en: "Study the mysterious Almanach; calming before entropy, insightful after binding.", ru: "Изучаешь загадочный Альманах; до энтропии успокаивает, после связывания даёт прозрения." },
        "Pattern Comprehension": { en: "Discern recurring patterns in reality to act more efficiently.", ru: "Узнаёшь повторяющиеся паттерны реальности для большей эффективности." },
        "Time Manipulation": { en: "Twist the flow of time to your advantage.", ru: "Искажаешь течение времени себе во благо." },
        "Reality Architecture": { en: "Shape structures of reality with deliberate design.", ru: "Формируешь структуры реальности продуманным дизайном." },
        "Self-Awareness of the Cycle": { en: "Become conscious of the repeating cycle to leverage it.", ru: "Осознаёшь повторяющийся цикл, чтобы использовать его." },
        "Pattern Weaving": { en: "Weave multiple patterns together for deeper effects.", ru: "Сплетаешь несколько паттернов ради глубоких эффектов." },
        "Body Maintenance": { en: "Maintain the body to resist age and strain.", ru: "Поддерживаешь тело, чтобы противостоять возрасту и нагрузкам." },
        "Life Orchestration": { en: "Conduct the phases of life to compress and focus outcomes.", ru: "Управляешь фазами жизни, сжимая и фокусируя результаты." },
        "Life Decision": { en: "Train the art of decisive choices in limited slots.", ru: "Осваиваешь искусство решающих выборов при ограниченных слотах." },
        "Career Obsession": { en: "Commit to career supremacy at the cost of other paths.", ru: "Посвящаешь себя карьерному вершительству, жертвуя остальным." },
        "Inner Mastery": { en: "Turn inward, prioritizing mastery over income.", ru: "Углубляешься внутрь, ставя мастерство выше дохода." },
        "Wanderer": { en: "Embrace movement and frequent shifts for flexibility.", ru: "Принимаешь движение и частые смены ради гибкости." },
        "Rooted Citizen": { en: "Anchor yourself, gaining strength from stability.", ru: "Укореняешься, черпая силу в стабильности." },
        "Existential Insight": { en: "Seek meaning beyond numbers to stabilize happiness.", ru: "Ищешь смысл за пределами чисел, стабилизируя счастье." },
        "Cycle Steward": { en: "Steward unstable life cycles, easing strain.", ru: "Присматриваешь за нестабильными циклами, смягчая напряжение." },
        "Meta Tuning": { en: "Adjust the weights of systems with subtle tuning.", ru: "Тонко настраиваешь веса систем." },
        "Deep Studies": { en: "Dive into deeper entropy research.", ru: "Погружаешься в более глубокие исследования энтропии." },
        // Items tooltips reuse names
        "Homeless": { en: "Sleep on the cold streets.", ru: "Спишь на холодных улицах." },
        "Tent": { en: "A simple tent to protect from rain.", ru: "Простая палатка от дождя." },
        "Wooden hut": { en: "A small wooden hut to call home.", ru: "Небольшая деревянная лачуга." },
        "Cottage": { en: "A cozy cottage with basic comforts.", ru: "Уютный коттедж с базовым комфортом." },
        "House": { en: "A proper house with multiple rooms.", ru: "Полноценный дом с несколькими комнатами." },
        "Large house": { en: "A spacious large house.", ru: "Просторный большой дом." },
        "Small palace": { en: "A small palace fit for nobility.", ru: "Малый дворец, достойный знати." },
        "Grand palace": { en: "A grand palace of luxury.", ru: "Большой роскошный дворец." },
        "Book": { en: "Basic literature to expand your mind.", ru: "Базовая литература для расширения кругозора." },
        "Dumbbells": { en: "Weights for strength training.", ru: "Гантели для тренировки силы." },
        "Personal squire": { en: "Someone to assist you in chores.", ru: "Помощник для рутинных дел." },
        "Steel longsword": { en: "A durable steel longsword.", ru: "Прочный стальной длинный меч." },
        "Butler": { en: "A butler to manage your estate.", ru: "Дворецкий для управления имением." },
        "Sapphire charm": { en: "A charm that soothes and inspires.", ru: "Амулет, который успокаивает и вдохновляет." },
        "Study desk": { en: "A proper desk for study sessions.", ru: "Хороший стол для занятий." },
        "Library": { en: "Access to a vast library of knowledge.", ru: "Доступ к огромной библиотеке знаний." },
        // Generic effect labels
        "Skill xp": { en: "Skill xp", ru: "Опыт навыков" },
        "Job xp": { en: "Job xp", ru: "Опыт работ" },
        "Military pay": { en: "Military pay", ru: "Военное жалованье" },
        "Military xp": { en: "Military xp", ru: "Опыт армии" },
        "Magic xp": { en: "Magic xp", ru: "Опыт магии" },
        "Dark magic xp": { en: "Dark magic xp", ru: "Опыт тёмной магии" },
        "Happiness": { en: "Happiness", ru: "Счастье" },
        "Expenses": { en: "Expenses", ru: "Расходы" },
        "Strength xp": { en: "Strength xp", ru: "Опыт силы" },
        "T.A.A. xp": { en: "T.A.A. xp", ru: "Опыт Арканной ассоциации" },
        "Longer lifespan": { en: "Longer lifespan", ru: "Более длинная жизнь" },
        "Gamespeed": { en: "Gamespeed", ru: "Скорость игры" },
        "All xp": { en: "All xp", ru: "Весь опыт" },
        "Evil gain": { en: "Evil gain", ru: "Прирост зла" },
        "Job pay": { en: "Job pay", ru: "Оплата работы" },
        "Deep pattern synergy": { en: "Deep pattern synergy", ru: "Глубокая синергия паттернов" },
        "Ease aging strain": { en: "Ease aging strain", ru: "Смягчить бремя старения" },
        "Focus compressed life": { en: "Focus compressed life", ru: "Фокус на сжатой жизни" },
        "Major choices resonate": { en: "Major choices resonate", ru: "Главные выборы отзываются" },
        "Career-first outlook": { en: "Career-first outlook", ru: "Приоритет карьеры" },
        "Inner focus outlook": { en: "Inner focus outlook", ru: "Приоритет внутреннего роста" },
        "Keeps moving": { en: "Keeps moving", ru: "Всегда в движении" },
        "Stays in place": { en: "Stays in place", ru: "Укоренён" },
        "See beyond numbers": { en: "See beyond numbers", ru: "Видеть дальше чисел" },
        "Stabilize a distorted cycle": { en: "Stabilize a distorted cycle", ru: "Стабилизировать искажённый цикл" },
        "Nudge how systems weigh in.": { en: "Nudge how systems weigh in.", ru: "Чуть менять вес систем." },
        "Insight gain": { en: "Insight gain", ru: "Прирост прозрения" },
        "Max level bonus": { en: "Max level bonus", ru: "Бонус к макс. уровню" },
        "Longevity efficiency": { en: "Longevity efficiency", ru: "Эффективность долголетия" },
        "High-tier job xp": { en: "High-tier job xp", ru: "Опыт высокоуровневых работ" },
    },
}

function getCurrentLanguage() {
    if (!window.gameData || !gameData.language) return LANG.RU
    return gameData.language
}

function setCurrentLanguage(lang) {
    if (!window.gameData) return
    if (lang !== LANG.EN && lang !== LANG.RU) return
    gameData.language = lang
    if (typeof refreshUI === "function") {
        refreshUI()
    }
}

function t(domain, key) {
    var lang = getCurrentLanguage()
    var dom = translations[domain] || {}
    var entry = dom[key]
    if (!entry) return key
    return entry[lang] || entry.en || key
}

function tUi(key) { return t("ui", key) }
function tCategory(key) { return t("category", key) }
function tUniverseName(u) {
    var e = translations.universe[u]
    return e ? (e.name[getCurrentLanguage()] || e.name.en || ("Universe " + u)) : ("Universe " + u)
}
function tUniverseDesc(u) {
    var e = translations.universe[u]
    return e ? (e.description[getCurrentLanguage()] || e.description.en || "") : ""
}
function tObserverIntellect(label) { return t("observerIntellect", label) }
function tName(key) { return t("name", key) }
function tTooltip(key) { return t("tooltip", key) }

function getTooltipText(key) {
    var text = tTooltip(key)
    if (text && text !== key) return text
    if (typeof tooltips !== "undefined" && tooltips[key]) return tooltips[key]
    return key
}
